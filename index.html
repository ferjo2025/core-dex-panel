<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Core Vault</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">

<style>
:root {
  --color-bg: #0f1217;
  --color-card-bg: #1e222a;
  --color-primary: #4f46e5;
  --color-secondary: #8b94ff;
  --color-accent: #10b981;
  --color-text: #e0e6f0;
  --color-text-muted: #a0aec0;
  --radius: 14px;
  --font-family: 'Space Grotesk', sans-serif;
}

body {
  margin:0;
  font-family: var(--font-family);
  background: linear-gradient(135deg,#0f1217,#1a1d25);
  color: var(--color-text);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  padding: 16px;
  box-sizing: border-box;
}

.container {
  max-width: 420px;
  width: 100%;
  background: var(--color-card-bg);
  border-radius: var(--radius);
  padding: 24px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.5);
  display: flex;
  flex-direction: column;
  gap: 20px;
  opacity: 0;
  animation: fadeIn 0.8s forwards;
  position: relative;
}

/* Fade in container */
@keyframes fadeIn { to { opacity: 1; } }

/* Logo y t√≠tulo */
.logo-title {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  text-align: center;
  position: relative;
}
.logo-svg {
  width: 48px;
  height: 48px;
}
.logo-center { 
  animation: pulse 2s infinite; 
  fill: #10b981;
}
@keyframes pulse {
  0%,100% { r:4; opacity:1; }
  50% { r:6; opacity:0.6; }
}
.slogan {
  font-size: 14px;
  color: var(--color-secondary);
  font-weight: 500;
  transition: opacity 0.5s;
}

/* Wallet address */
.wallet-address {
  font-size:14px;
  color: var(--color-secondary);
  text-align:center;
  user-select: all;
  cursor:pointer;
  padding:8px 12px;
  border-radius: var(--radius);
  background: rgba(79,70,229,0.1);
  transition: background 0.3s;
}
.wallet-address:active { background: rgba(79,70,229,0.2); }

/* Copy button */
.copy-button {
  background: var(--color-primary);
  color: white;
  border:none;
  padding:10px 16px;
  border-radius: var(--radius);
  font-weight:600;
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:8px;
  transition: transform 0.1s, box-shadow 0.2s, background 0.3s;
}
.copy-button:active { 
  transform: scale(0.95);
  box-shadow: 0 0 15px #10b981;
}
.copy-button:hover { background: var(--color-accent); transform: scale(1.05); }

/* Stats cards */
section.stats {
  display:flex;
  gap:12px;
  overflow-x:auto;
  padding-bottom:8px;
}
section.stats::-webkit-scrollbar { display:none; }
.card {
  min-width:100px;
  background: rgba(40,45,60,0.8);
  border-radius: var(--radius);
  padding:12px;
  text-align:center;
  transition: transform 0.2s, box-shadow 0.2s;
}
.card:active {
  transform: scale(1.05);
  box-shadow: 0 0 20px #10b981;
}
.card .label { font-size:12px; color: var(--color-text-muted); margin-bottom:4px; text-transform: uppercase; }
.card .value { font-size:16px; font-weight:700; color: var(--color-text); }

/* Gains */
section.gains {
  background: var(--color-card-bg);
  padding:16px;
  border-radius: var(--radius);
  box-shadow: inset 0 0 12px rgba(79,70,229,0.2);
  transition: max-height 0.4s ease;
}
section.gains h2 { font-size:18px; font-weight:700; margin-bottom:10px; color: var(--color-primary); }
section.gains ul { list-style:none; padding:0; margin:0; }
section.gains li {
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
  font-weight:600;
  font-size:14px;
  color: var(--color-text);
}
section.gains li span { font-weight:400; color: var(--color-text-muted); }

/* Exit button */
#btnExit {
  background: var(--color-primary);
  color:white;
  border:none;
  padding:12px;
  font-weight:700;
  font-size:16px;
  border-radius: var(--radius);
  cursor:pointer;
  width:100%;
  transition: background 0.3s, transform 0.1s;
}
#btnExit:active { transform: scale(0.95); box-shadow: 0 0 15px #10b981; }
#btnExit:hover { background: var(--color-accent); }

/* Tooltip flotante para copiar wallet */
#copyTooltip {
  position:absolute;
  background: #10b981;
  color:white;
  padding:6px 12px;
  border-radius:10px;
  font-size:12px;
  opacity:0;
  pointer-events:none;
  transform:translateY(0);
  transition: opacity 0.4s, transform 0.4s;
  top: -50px;
  left:50%;
  transform: translateX(-50%);
}
</style>
</head>

<body>
<div class="container">
  <div class="logo-title">
    <svg class="logo-svg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle class="logo-center" cx="12" cy="12" r="4"/>
      <circle cx="12" cy="12" r="7.5"/>
      <circle cx="12" cy="12" r="10.5"/>
    </svg>
    <h1>Core Vault</h1>
    <div class="slogan">üîê Control total de tus inversiones</div>
  </div>

  <div class="wallet-address" id="walletOnly" title="Haz click para copiar">No asignada</div>
  <button class="copy-button" id="copyBtn">üîó Copiar Wallet</button>
  <div id="copyTooltip">Copiado ‚úÖ</div>

  <section class="stats section-anim">
    <div class="card"><div class="label">Invertido</div><div class="value" id="invertido">--</div></div>
    <div class="card"><div class="label">Retirado</div><div class="value" id="retirado">--</div></div>
    <div class="card"><div class="label">Pendiente</div><div class="value" id="pendiente">--</div></div>
  </section>

  <section class="gains section-anim">
    <h2>Ganancias</h2>
    <ul>
      <li>Semanal <span id="gananciasSem">--</span></li>
      <li>Referidos <span id="gananciasRef">--</span></li>
      <li>Bono admin <span id="bonoAdmin">--</span></li>
      <li>Ganancia acumulada <span id="gananciaTotal">--</span></li>
    </ul>
  </section>

  <button id="btnExit">Salir de la Wallet</button>
</div>

<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
const tg = window.Telegram.WebApp;

// Obtener par√°metros desde backend
function getParameterByName(name) {
  const url = window.location.href;
  name = name.replace(/[\[\]]/g, '\\$&');
  const regex = new RegExp('[?&]'+name+'(=([^&#]*)|&|#|$)');
  const results = regex.exec(url);
  if(!results) return null;
  if(!results[2]) return '';
  return decodeURIComponent(results[2].replace(/\+/g,' '));
}

const wallet = getParameterByName('wallet') || "No asignada";
const invertido = parseInt(getParameterByName('invertido') || 0);
const retirado = parseInt(getParameterByName('retirado') || 0);
const pendiente = parseInt(getParameterByName('pendiente') || 0);
const gananciasSem = parseInt(getParameterByName('gananciasSem') || 0);
const gananciasRef = parseInt(getParameterByName('gananciasRef') || 0);
const bonoAdmin = parseInt(getParameterByName('bonoAdmin') || 0);
const gananciaTotal = parseInt(getParameterByName('gananciaTotal') || 0);

// Poner valores
document.getElementById("walletOnly").textContent = wallet;
function animateValue(id,end,duration=1000){
  const obj=document.getElementById(id);
  let start=0;
  const stepTime=Math.abs(Math.floor(duration/end));
  const timer=setInterval(()=>{
    start++;
    obj.textContent=start+" USDT";
    if(start>=end) clearInterval(timer);
  },stepTime);
}
animateValue('invertido',invertido);
animateValue('retirado',retirado);
animateValue('pendiente',pendiente);
animateValue('gananciasSem',gananciasSem);
animateValue('gananciasRef',gananciasRef);
animateValue('bonoAdmin',bonoAdmin);
animateValue('gananciaTotal',gananciaTotal);

// Tooltip copy wallet
function showTooltip() {
  const tooltip=document.getElementById('copyTooltip');
  tooltip.style.opacity=1;
  tooltip.style.transform="translateY(-30px)";
  setTimeout(()=>{
    tooltip.style.opacity=0;
    tooltip.style.transform="translateY(0)";
  },1500);
}
function copyWallet(){
  navigator.clipboard.writeText(wallet).then(()=>{
    showTooltip();
  }).catch(()=>{
    showTooltip();
  });
}
document.getElementById('copyBtn').addEventListener('click',copyWallet);
document.getElementById('walletOnly').addEventListener('click',copyWallet);

// Exit con fade
document.getElementById('btnExit').addEventListener('click',()=>{
  document.querySelector('.container').style.opacity=0;
  setTimeout(()=>tg.close(),300);
});

// Expandir Mini App
tg.expand();

// Slogan animado
const slogans=["üöÄ Tu inversi√≥n, tu control","üìä Todo en tiempo real"];
let idx=0;
const sloganEl=document.querySelector('.slogan');
setInterval(()=>{
  sloganEl.style.opacity=0;
  setTimeout(()=>{
    sloganEl.textContent=slogans[idx%2];
    sloganEl.style.opacity=1;
    idx++;
  },400);
},4000);

// Fade sections
const sections=document.querySelectorAll('.section-anim');
sections.forEach(sec=>sec.classList.add('visible'));
</script>
</body>
</html>
